<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ú–∞—Ä—à—Ä—É—Ç</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav>
    <div>
      <a href="clients.html"><button class="tab-button">–ó–∞–∫–∞–∑—á–∏–∫–∏</button></a>
      <a href="products.html"><button class="tab-button">–ò–∑–¥–µ–ª–∏—è</button></a>
      <a href="resonators.html"><button class="tab-button">–†–µ–∑–æ–Ω–∞—Ç–æ—Ä—ã</button></a>
      <a href="orders.html"><button class="tab-button">–ó–∞–∫–∞–∑—ã</button></a>
      <a href="routes.html"><button class="tab-button" disabled>–ú–∞—Ä—à—Ä—É—Ç</button></a>
      <a href="done.html"><button class="tab-button">–ì–æ—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑</button></a>
      <a href="admin.html"><button class="tab-button" id="adminTabButton">–ê–¥–º–∏–Ω</button></a>
    </div>
    <div id="accountSection">
      <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="User"/>
      <span id="userFio"></span>
      <button onclick="logout()">–í—ã–π—Ç–∏</button>
    </div>
  </nav>

  <section id="routesTab" class="tab-content active">
    <h2>–ú–∞—Ä—à—Ä—É—Ç—ã</h2>
    <button class="action-button secondary" onclick="toggleForm('routeForm')" id="addClientButton">–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç</button>

    <form id="routeForm" class="hidden">
      <select id="orderSelect" name="orderID" required></select>
      <input type="number" id="productID" name="productID" placeholder="ID –∏–∑–¥–µ–ª–∏—è" required />
      <input type="text" id="routeN" name="routeN" placeholder="–≠—Ç–∞–ø –º–∞—Ä—à—Ä—É—Ç–∞" required />
      <input type="date" id="routeDate" name="routeDate" placeholder="–î–∞—Ç–∞ —ç—Ç–∞–ø–∞" required />
      <input type="text" id="productSerial" name="productSerial" placeholder="–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä" />
      <input type="text" id="routeNote" name="routeNote" placeholder="–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ" />
      <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </form>

    <table>
      <thead>
        <tr>
          <th>‚Ññ</th>
          <th>–ó–∞–∫–∞–∑</th>
          <th>–≠—Ç–∞–ø</th>
          <th>–î–∞—Ç–∞</th>
          <th>ID –∏–∑–¥–µ–ª–∏—è</th>
          <th>–°–µ—Ä–∏–π–Ω—ã–π ‚Ññ</th>
          <th>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</th>
        </tr>
      </thead>
      <tbody id="routeTableBody"></tbody>
    </table>
  </section>

  <script src="auth.js"></script>
  <script src="script.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const email = localStorage.getItem('userEmail');
    if (!email) {
      window.location.href = 'index.html';
    } else {
      const accountSection = document.getElementById('accountSection');
      const userFioSpan = document.getElementById('userFio');
      const userFio = localStorage.getItem('userFIO') || email;
      if (accountSection && userFioSpan) {
        userFioSpan.textContent = userFio;
        accountSection.style.display = 'flex';
      }

      // üü¢ –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç", –µ—Å–ª–∏ —Ä–æ–ª—å –Ω–µ admin –∏–ª–∏ manager
      hideIfNotAllowed('addClientButton', ['admin', 'manager']);// –°–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É 'routeForm' –µ—Å–ª–∏ –Ω—É–∂–Ω–æ (–µ—Å–ª–∏ –Ω–∞–¥–æ)
      hideIfNotAllowed('routeForm', ['admin', 'manager']);
    }
    hideIfNotAllowed('adminTabButton', ['admin']);
  });
  </script>
</body>
</html>
